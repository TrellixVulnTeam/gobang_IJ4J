{"ast":null,"code":"import { reactive, inject } from 'vue';\nexport default {\n  name: \"Login\",\n\n  setup() {\n    const global = inject('global');\n    const axios = inject('axios');\n    const router = inject('router');\n    const formState = reactive({\n      username: '',\n      password: '',\n      remember: true\n    }); //请求是否保持登录状态\n\n    const onFinish = values => {\n      const url = global.http_local_url + 'log/login/' + formState.username + '/' + formState.password + '/' + formState.remember;\n      axios.get(url).then(res => {\n        if (res.data.code === 0) {\n          global.username = res.data.data.username;\n          console.log(global);\n          router.push({\n            path: '/person'\n          });\n        }\n\n        if (res.data.code === 40) {\n          console.log(\"login fail\");\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    const onFinishFailed = errorInfo => {\n      console.log('Failed:', errorInfo);\n    };\n\n    return {\n      formState,\n      onFinish,\n      onFinishFailed\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAqCA,SAAUA,QAAV,EAAmBC,MAAnB,QAAiC,KAAjC;AACA,eAAe;EACbC,IAAI,EAAC,OADQ;;EAEbC,KAAK,GAAG;IACN,MAAMC,MAAM,GAACH,MAAM,CAAC,QAAD,CAAnB;IACA,MAAOI,KAAK,GAACJ,MAAM,CAAC,OAAD,CAAnB;IACA,MAAMK,MAAM,GAACL,MAAM,CAAC,QAAD,CAAnB;IACA,MAAMM,SAAQ,GAAIP,QAAQ,CAAC;MACzBQ,QAAQ,EAAE,EADe;MAEzBC,QAAQ,EAAE,EAFe;MAGzBC,QAAQ,EAAE;IAHe,CAAD,CAA1B,CAJM,CASN;;IAEA,MAAMC,QAAO,GAAIC,MAAK,IAAK;MACzB,MAAMC,GAAG,GAACT,MAAM,CAACU,cAAP,GAAsB,YAAtB,GAAmCP,SAAS,CAACC,QAA7C,GAAsD,GAAtD,GAA0DD,SAAS,CAACE,QAApE,GAA6E,GAA7E,GAAiFF,SAAS,CAACG,QAArG;MACAL,KAAK,CAACU,GAAN,CAAUF,GAAV,EACKG,IADL,CACUC,GAAG,IAAE;QACT,IAAGA,GAAG,CAACC,IAAJ,CAASC,IAAT,KAAgB,CAAnB,EAAqB;UACnBf,MAAM,CAACI,QAAP,GAAgBS,GAAG,CAACC,IAAJ,CAASA,IAAT,CAAcV,QAA9B;UACAY,OAAO,CAACC,GAAR,CAAYjB,MAAZ;UACAE,MAAM,CAACgB,IAAP,CAAY;YAACC,IAAI,EAAC;UAAN,CAAZ;QACF;;QACA,IAAGN,GAAG,CAACC,IAAJ,CAASC,IAAT,KAAgB,EAAnB,EAAsB;UACpBC,OAAO,CAACC,GAAR,CAAY,YAAZ;QACF;MACL,CAVD,EAUGG,KAVH,CAWI,UAAUC,KAAV,EAAgB;QACdL,OAAO,CAACC,GAAR,CAAYI,KAAZ;MACF,CAbJ;IAgBD,CAlBD;;IAoBA,MAAMC,cAAa,GAAIC,SAAQ,IAAK;MAClCP,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBM,SAAvB;IACD,CAFD;;IAIA,OAAO;MACLpB,SADK;MAELI,QAFK;MAGLe;IAHK,CAAP;EAKD;;AA1CY,CAAf","names":["reactive","inject","name","setup","global","axios","router","formState","username","password","remember","onFinish","values","url","http_local_url","get","then","res","data","code","console","log","push","path","catch","error","onFinishFailed","errorInfo"],"sourceRoot":"","sources":["C:\\gobang\\gobang\\view\\src\\components\\Login.vue"],"sourcesContent":["<template>\r\n  <div id=\"form\">\r\n    <a-form\r\n        :model=\"formState\"\r\n        name=\"basic\"\r\n        :label-col=\"{ span: 8 }\"\r\n        :wrapper-col=\"{ span: 16 }\"\r\n        autocomplete=\"off\"\r\n        @finish=\"onFinish\"\r\n        @finishFailed=\"onFinishFailed\"\r\n    >\r\n      <a-form-item\r\n          label=\"Username\"\r\n          name=\"username\"\r\n          :rules=\"[{ required: true, message: 'Please input your username!' }]\"\r\n      >\r\n        <a-input v-model:value=\"formState.username\" />\r\n      </a-form-item>\r\n      <a-form-item\r\n          label=\"Password\"\r\n          name=\"password\"\r\n          :rules=\"[{ required: true,message: 'Please input your password'}]\"\r\n      >\r\n        <a-input-password v-model:value=\"formState.password\" />\r\n      </a-form-item>\r\n\r\n      <a-form-item name=\"remember\" :wrapper-col=\"{ offset: 8, span: 16 }\">\r\n        <a-checkbox v-model:checked=\"formState.remember\">Remember me</a-checkbox>\r\n      </a-form-item>\r\n\r\n      <a-form-item :wrapper-col=\"{ offset: 8, span: 16 }\">\r\n        <a-button type=\"primary\" html-type=\"submit\">Login</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {  reactive,inject } from 'vue';\r\nexport default({\r\n  name:\"Login\",\r\n  setup() {\r\n    const global=inject('global');\r\n    const  axios=inject('axios');\r\n    const router=inject('router')\r\n    const formState = reactive({\r\n      username: '',\r\n      password: '',\r\n      remember: true,\r\n    });\r\n    //请求是否保持登录状态\r\n    \r\n    const onFinish = values => {\r\n      const url=global.http_local_url+'log/login/'+formState.username+'/'+formState.password+'/'+formState.remember;\r\n      axios.get(url)\r\n          .then(res=>{\r\n            if(res.data.code===0){\r\n              global.username=res.data.data.username;\r\n              console.log(global);\r\n              router.push({path:'/person'});\r\n            }\r\n            if(res.data.code===40){\r\n              console.log(\"login fail\")\r\n            }\r\n      }).catch(\r\n          function (error){\r\n            console.log(error)\r\n          }\r\n      )\r\n\r\n    };\r\n\r\n    const onFinishFailed = errorInfo => {\r\n      console.log('Failed:', errorInfo);\r\n    };\r\n\r\n    return {\r\n      formState,\r\n      onFinish,\r\n      onFinishFailed,\r\n    };\r\n  },\r\n\r\n});\r\n</script>\r\n<style>\r\n#before{\r\n  width: 33%;\r\n  height: 100%;\r\n  display: inline-block;\r\n}\r\n#form{\r\n  margin-top: 10%;\r\n  margin-left: 33%;\r\n  display: inline-block;\r\n}\r\n#after{\r\n  width: 33%;\r\n  height: 100%;\r\n  display: inline-block;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}